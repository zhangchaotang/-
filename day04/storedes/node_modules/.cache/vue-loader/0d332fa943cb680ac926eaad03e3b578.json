{"remainingRequest":"e:\\全栈\\semester_03\\semester_03\\day03\\storedes2\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!e:\\全栈\\semester_03\\semester_03\\day03\\storedes2\\src\\views\\ShoppingCart.vue?vue&type=script&lang=js&","dependencies":[{"path":"e:\\全栈\\semester_03\\semester_03\\day03\\storedes2\\src\\views\\ShoppingCart.vue","mtime":1573546649896},{"path":"e:\\全栈\\semester_03\\semester_03\\day03\\storedes2\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"e:\\全栈\\semester_03\\semester_03\\day03\\storedes2\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"e:\\全栈\\semester_03\\semester_03\\day03\\storedes2\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"e:\\全栈\\semester_03\\semester_03\\day03\\storedes2\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQpleHBvcnQgZGVmYXVsdCB7DQogIGRhdGEgKCkgew0KICAgIHJldHVybiB7DQogICAgICBjYXJ0TGlzdDogSlNPTi5wYXJzZSh3aW5kb3cubG9jYWxTdG9yYWdlLmdldEl0ZW0oJ2NhcnRMaXN0JykpLA0KICAgICAgZ29vZHNMaXN0OiBbXSwNCiAgICAgIGNoZWNrZWQ6IGZhbHNlDQogICAgfQ0KICB9LA0KICBtZXRob2RzOiB7DQogICAgZ2V0Q2FydCAoKSB7DQogICAgICB0aGlzLiRodHRwDQogICAgICAgIC5nZXQoJy9nb29kcycsIHsNCiAgICAgICAgICBwYXJhbXM6IHsNCiAgICAgICAgICAgIGdvb2RzTGlzdDogdGhpcy5jYXJ0TGlzdC5pZHMuam9pbigpDQogICAgICAgICAgfQ0KICAgICAgICB9KQ0KICAgICAgICAudGhlbihyZXMgPT4gew0KICAgICAgICAgIHRoaXMuZ29vZHNMaXN0ID0gcmVzLmRhdGEuZGF0YQ0KICAgICAgICAgIGNvbnNvbGUubG9nKHRoaXMuZ29vZHNMaXN0KQ0KICAgICAgICB9KQ0KICAgIH0NCiAgfSwNCiAgd2F0Y2g6IHsNCiAgICBjYXJ0TGlzdDogew0KICAgICAgZGVlcDogdHJ1ZSwNCiAgICAgIGhhbmRsZXI6IGZ1bmN0aW9uICgpIHsNCiAgICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oJ2NhcnRMaXN0JywgSlNPTi5zdHJpbmdpZnkodGhpcy5jYXJ0TGlzdCkpDQogICAgICB9DQogICAgfQ0KICB9LA0KICBjb21wdXRlZDogew0KICAgIHRvdGFsUHJpY2U6IGZ1bmN0aW9uICgpIHsNCiAgICAgIGxldCBzdW0gPSAwDQogICAgICB0aGlzLmdvb2RzTGlzdC5mb3JFYWNoKChpdGVtLCBpbmRleCkgPT4gew0KICAgICAgICBpZiAodGhpcy5jYXJ0TGlzdC5pbmZvW2l0ZW0uaWRdLmlzY2hlY2tlZCkgew0KICAgICAgICAgIHN1bSArPSBpdGVtLnByaWNlICogdGhpcy5jYXJ0TGlzdC5pbmZvW2l0ZW0uaWRdLmNvdW50ICogMTAwDQogICAgICAgIH0NCiAgICAgIH0pDQogICAgICByZXR1cm4gc3VtDQogICAgfSwNCiAgICBjaGVja0FsbDogew0KICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7DQogICAgICAgIGZvciAobGV0IGkgaW4gdGhpcy5jYXJ0TGlzdC5pbmZvKSB7DQogICAgICAgICAgaWYgKCF0aGlzLmNhcnRMaXN0LmluZm9baV0uaXNjaGVja2VkKSB7DQogICAgICAgICAgICByZXR1cm4gZmFsc2UNCiAgICAgICAgICB9DQogICAgICAgIH0NCiAgICAgICAgcmV0dXJuIHRydWUNCiAgICAgIH0sDQogICAgICBzZXQ6IGZ1bmN0aW9uIChuZXdWYWx1ZSkgew0KICAgICAgICBmb3IgKGxldCBpIGluIHRoaXMuY2FydExpc3QuaW5mbykgew0KICAgICAgICAgIHRoaXMuY2FydExpc3QuaW5mb1tpXS5pc2NoZWNrZWQgPSBuZXdWYWx1ZQ0KICAgICAgICB9DQogICAgICB9DQogICAgfQ0KICB9LA0KICBjcmVhdGVkICgpIHsNCiAgICB0aGlzLmdldENhcnQoKQ0KICB9DQp9DQo="},{"version":3,"sources":["ShoppingCart.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAuCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"ShoppingCart.vue","sourceRoot":"src/views","sourcesContent":["<template>\r\n  <div class=\"shoppingCart\">\r\n    <!-- 页头 -->\r\n    <van-row>\r\n      <van-nav-bar title=\"购物车\" />\r\n    </van-row>\r\n    <!-- 清单列 -->\r\n    <van-row>\r\n      <van-row class=\"cart_item\" v-for=\"(item) in goodsList\" :key=\"item.id\">\r\n        <van-col :span=\"2\" class=\"checkbox\">\r\n          <van-checkbox v-model=\"cartList.info[item.id].ischecked\" />\r\n        </van-col>\r\n        <van-col :span=\"22\">\r\n          <van-card :price=\"item.price\" :title=\"item.goods_name\" :thumb=\"item.image\">\r\n            <div slot=\"num\">\r\n              <van-stepper v-model=\"cartList.info[item.id].count\" />\r\n            </div>\r\n            <div slot=\"bottom\" class=\"xiaoji\">\r\n              <span class=\"xiaoji2\">小计:</span>\r\n              &yen;{{item.price * cartList.info[item.id].count}}元\r\n            </div>\r\n          </van-card>\r\n        </van-col>\r\n      </van-row>\r\n    </van-row>\r\n    <!--合计  -->\r\n    <van-row class=\"heji\">\r\n      <van-submit-bar :price=\"totalPrice\" button-text=\"提交订单\">\r\n        <van-checkbox v-model=\"checkAll\">全选</van-checkbox>\r\n        <span slot=\"tip\">\r\n          你的收货地址不支持同城送,\r\n          <span>修改地址</span>\r\n        </span>\r\n      </van-submit-bar>\r\n    </van-row>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  data () {\r\n    return {\r\n      cartList: JSON.parse(window.localStorage.getItem('cartList')),\r\n      goodsList: [],\r\n      checked: false\r\n    }\r\n  },\r\n  methods: {\r\n    getCart () {\r\n      this.$http\r\n        .get('/goods', {\r\n          params: {\r\n            goodsList: this.cartList.ids.join()\r\n          }\r\n        })\r\n        .then(res => {\r\n          this.goodsList = res.data.data\r\n          console.log(this.goodsList)\r\n        })\r\n    }\r\n  },\r\n  watch: {\r\n    cartList: {\r\n      deep: true,\r\n      handler: function () {\r\n        localStorage.setItem('cartList', JSON.stringify(this.cartList))\r\n      }\r\n    }\r\n  },\r\n  computed: {\r\n    totalPrice: function () {\r\n      let sum = 0\r\n      this.goodsList.forEach((item, index) => {\r\n        if (this.cartList.info[item.id].ischecked) {\r\n          sum += item.price * this.cartList.info[item.id].count * 100\r\n        }\r\n      })\r\n      return sum\r\n    },\r\n    checkAll: {\r\n      get: function () {\r\n        for (let i in this.cartList.info) {\r\n          if (!this.cartList.info[i].ischecked) {\r\n            return false\r\n          }\r\n        }\r\n        return true\r\n      },\r\n      set: function (newValue) {\r\n        for (let i in this.cartList.info) {\r\n          this.cartList.info[i].ischecked = newValue\r\n        }\r\n      }\r\n    }\r\n  },\r\n  created () {\r\n    this.getCart()\r\n  }\r\n}\r\n</script>\r\n\r\n<style>\r\n/* 小计 */\r\n.xiaoji {\r\n  display: block;\r\n  text-align: right;\r\n  margin-top: 20px;\r\n}\r\n.xiaoji2 {\r\n  padding-right: 10px;\r\n}\r\n\r\n.checkbox {\r\n  position: relative;\r\n  left: 6px;\r\n  top: 44px;\r\n}\r\n\r\n.van-submit-bar {\r\n  margin-bottom: 50px;\r\n}\r\n\r\n.heji {\r\n  height: 84px;\r\n  margin-bottom: 50px;\r\n}\r\n.cart_item {\r\n  padding: 10px 0;\r\n}\r\n</style>\r\n"]}]}