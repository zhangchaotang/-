{"remainingRequest":"e:\\全栈\\semester_03\\semester_03\\day04\\storedes\\node_modules\\babel-loader\\lib\\index.js!e:\\全栈\\semester_03\\semester_03\\day04\\storedes\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!e:\\全栈\\semester_03\\semester_03\\day04\\storedes\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!e:\\全栈\\semester_03\\semester_03\\day04\\storedes\\src\\views\\Home.vue?vue&type=script&lang=js&","dependencies":[{"path":"e:\\全栈\\semester_03\\semester_03\\day04\\storedes\\src\\views\\Home.vue","mtime":1573541474499},{"path":"e:\\全栈\\semester_03\\semester_03\\day04\\storedes\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"e:\\全栈\\semester_03\\semester_03\\day04\\storedes\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"e:\\全栈\\semester_03\\semester_03\\day04\\storedes\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"e:\\全栈\\semester_03\\semester_03\\day04\\storedes\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3ltYm9sIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuY29uY2F0IjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZmlsdGVyIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZm9yLWVhY2giOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5pbmRleC1vZiI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLm9iamVjdC5nZXQtb3duLXByb3BlcnR5LWRlc2NyaXB0b3IiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5vYmplY3QuZ2V0LW93bi1wcm9wZXJ0eS1kZXNjcmlwdG9ycyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLm9iamVjdC5rZXlzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvd2ViLmRvbS1jb2xsZWN0aW9ucy5mb3ItZWFjaCI7CmltcG9ydCBfZGVmaW5lUHJvcGVydHkgZnJvbSAiZTpcXFx1NTE2OFx1NjgwOFxcc2VtZXN0ZXJfMDNcXHNlbWVzdGVyXzAzXFxkYXkwNFxcc3RvcmVkZXNcXG5vZGVfbW9kdWxlc1xcQGJhYmVsXFxydW50aW1lLWNvcmVqczMvaGVscGVycy9lc20vZGVmaW5lUHJvcGVydHkiOwoKZnVuY3Rpb24gb3duS2V5cyhvYmplY3QsIGVudW1lcmFibGVPbmx5KSB7IHZhciBrZXlzID0gT2JqZWN0LmtleXMob2JqZWN0KTsgaWYgKE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMpIHsgdmFyIHN5bWJvbHMgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKG9iamVjdCk7IGlmIChlbnVtZXJhYmxlT25seSkgc3ltYm9scyA9IHN5bWJvbHMuZmlsdGVyKGZ1bmN0aW9uIChzeW0pIHsgcmV0dXJuIE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3Iob2JqZWN0LCBzeW0pLmVudW1lcmFibGU7IH0pOyBrZXlzLnB1c2guYXBwbHkoa2V5cywgc3ltYm9scyk7IH0gcmV0dXJuIGtleXM7IH0KCmZ1bmN0aW9uIF9vYmplY3RTcHJlYWQodGFyZ2V0KSB7IGZvciAodmFyIGkgPSAxOyBpIDwgYXJndW1lbnRzLmxlbmd0aDsgaSsrKSB7IHZhciBzb3VyY2UgPSBhcmd1bWVudHNbaV0gIT0gbnVsbCA/IGFyZ3VtZW50c1tpXSA6IHt9OyBpZiAoaSAlIDIpIHsgb3duS2V5cyhzb3VyY2UsIHRydWUpLmZvckVhY2goZnVuY3Rpb24gKGtleSkgeyBfZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBrZXksIHNvdXJjZVtrZXldKTsgfSk7IH0gZWxzZSBpZiAoT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcnMpIHsgT2JqZWN0LmRlZmluZVByb3BlcnRpZXModGFyZ2V0LCBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9ycyhzb3VyY2UpKTsgfSBlbHNlIHsgb3duS2V5cyhzb3VyY2UpLmZvckVhY2goZnVuY3Rpb24gKGtleSkgeyBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBrZXksIE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3Ioc291cmNlLCBrZXkpKTsgfSk7IH0gfSByZXR1cm4gdGFyZ2V0OyB9CgovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwppbXBvcnQgeyBtYXBNdXRhdGlvbnMgfSBmcm9tICd2dWV4JzsKZXhwb3J0IGRlZmF1bHQgewogIGRhdGE6IGZ1bmN0aW9uIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBzbGlkZXNob3dMaXN0OiBbXSwKICAgICAgZ29vZHNDbGFzc2VzOiBbXSwKICAgICAgZ29vZHNMaXN0czogW10sCiAgICAgIGxvYWRpbmc6IGZhbHNlLAogICAgICBmaW5pc2hlZDogZmFsc2UsCiAgICAgIHBhZ2U6IDEsCiAgICAgIHBlcl9wYWdlOiAyMAogICAgfTsKICB9LAogIG1ldGhvZHM6IF9vYmplY3RTcHJlYWQoe30sIG1hcE11dGF0aW9ucyhbJ2NhcnROdW1DaGFuZ2UnXSksIHsKICAgIG9uTG9hZDogZnVuY3Rpb24gb25Mb2FkKCkgewogICAgICB2YXIgX3RoaXMgPSB0aGlzOwoKICAgICAgLy8g6LCD55So5o6l5Y+j6I635Y+W6aaW6aG15ZWG5ZOB5YiX6KGoCiAgICAgIHRoaXMuJGh0dHAuZ2V0KCIvaW5kZXhfZ29vZHM/cGFnZT0iLmNvbmNhdCh0aGlzLnBhZ2UsICImcGVyX3BhZ2U9IikuY29uY2F0KHRoaXMucGVyX3BhZ2UpKS50aGVuKGZ1bmN0aW9uIChyZXMpIHsKICAgICAgICBfdGhpcy5nb29kc0xpc3RzID0gX3RoaXMuZ29vZHNMaXN0cy5jb25jYXQocmVzLmRhdGEuZGF0YSk7IC8vIOWKoOi9veeKtuaAgee7k+adnwoKICAgICAgICBfdGhpcy5sb2FkaW5nID0gZmFsc2U7CiAgICAgICAgX3RoaXMucGFnZSsrOyAvLyDmlbDmja7lhajpg6jliqDovb3lrozmiJAKCiAgICAgICAgaWYgKHJlcy5kYXRhLmRhdGEubGVuZ3RoID09PSAwKSB7CiAgICAgICAgICBfdGhpcy5maW5pc2hlZCA9IHRydWU7CiAgICAgICAgfQogICAgICB9KTsKICAgIH0sCiAgICBhZGRDYXJ0OiBmdW5jdGlvbiBhZGRDYXJ0KGlkKSB7CiAgICAgIHZhciBhZGRDYXJ0TGlzdCA9IHsKICAgICAgICBpZHM6IFtpZF0sCiAgICAgICAgaW5mbzogX2RlZmluZVByb3BlcnR5KHt9LCBpZCwgewogICAgICAgICAgY291bnQ6IDEsCiAgICAgICAgICBpc2NoZWNrZWQ6IGZhbHNlCiAgICAgICAgfSkKICAgICAgfTsKICAgICAgdmFyIGNhcnRMaXN0ID0gd2luZG93LmxvY2FsU3RvcmFnZS5nZXRJdGVtKCdjYXJ0TGlzdCcpOwoKICAgICAgaWYgKGNhcnRMaXN0ID09PSBudWxsKSB7CiAgICAgICAgd2luZG93LmxvY2FsU3RvcmFnZS5zZXRJdGVtKCdjYXJ0TGlzdCcsIEpTT04uc3RyaW5naWZ5KGFkZENhcnRMaXN0KSk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgY2FydExpc3QgPSBKU09OLnBhcnNlKGNhcnRMaXN0KTsKCiAgICAgICAgaWYgKGNhcnRMaXN0Lmlkcy5pbmRleE9mKGlkKSAhPT0gLTEpIHsKICAgICAgICAgIGNhcnRMaXN0LmluZm9baWRdLmNvdW50Kys7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIGNhcnRMaXN0Lmlkcy5wdXNoKGlkKTsKICAgICAgICAgIGNhcnRMaXN0LmluZm9baWRdID0gewogICAgICAgICAgICBjb3VudDogMSwKICAgICAgICAgICAgaXNjaGVja2VkOiBmYWxzZQogICAgICAgICAgfTsKICAgICAgICB9CgogICAgICAgIHdpbmRvdy5sb2NhbFN0b3JhZ2Uuc2V0SXRlbSgnY2FydExpc3QnLCBKU09OLnN0cmluZ2lmeShjYXJ0TGlzdCkpOwogICAgICB9CgogICAgICB0aGlzLmNhcnROdW1DaGFuZ2UoSlNPTi5wYXJzZSh3aW5kb3cubG9jYWxTdG9yYWdlLmdldEl0ZW0oJ2NhcnRMaXN0JykpLmlkcy5sZW5ndGgpOwogICAgfQogIH0pLAogIGNyZWF0ZWQ6IGZ1bmN0aW9uIGNyZWF0ZWQoKSB7CiAgICB2YXIgX3RoaXMyID0gdGhpczsKCiAgICAvLyDosIPnlKjmjqXlj6Pojrflj5bova7mkq3lm77mlbDmja4KICAgIHRoaXMuJGh0dHAuZ2V0KCcvbWFpbl9hZF9pbWFnZXMnKS50aGVuKGZ1bmN0aW9uIChyZXMpIHsKICAgICAgX3RoaXMyLnNsaWRlc2hvd0xpc3QgPSByZXMuZGF0YS5kYXRhOwogICAgfSk7IC8vIOiwg+eUqOaOpeWPo+iOt+WPlummlumhteWVhuWTgeaOqOiNkOWIhuexuwoKICAgIHRoaXMuJGh0dHAuZ2V0KCcvaW5kZXhfY2F0ZWdvcmllcycpLnRoZW4oZnVuY3Rpb24gKHJlcykgewogICAgICBfdGhpczIuZ29vZHNDbGFzc2VzID0gcmVzLmRhdGEuZGF0YTsKICAgIH0pOwogIH0KfTs="},{"version":3,"sources":["Home.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA+BA,SAAA,YAAA,QAAA,MAAA;AACA,eAAA;AACA,EAAA,IADA,kBACA;AACA,WAAA;AACA,MAAA,aAAA,EAAA,EADA;AAEA,MAAA,YAAA,EAAA,EAFA;AAGA,MAAA,UAAA,EAAA,EAHA;AAIA,MAAA,OAAA,EAAA,KAJA;AAKA,MAAA,QAAA,EAAA,KALA;AAMA,MAAA,IAAA,EAAA,CANA;AAOA,MAAA,QAAA,EAAA;AAPA,KAAA;AASA,GAXA;AAYA,EAAA,OAAA,oBACA,YAAA,CAAA,CAAA,eAAA,CAAA,CADA;AAEA,IAAA,MAFA,oBAEA;AAAA;;AACA;AACA,WAAA,KAAA,CACA,GADA,6BACA,KAAA,IADA,uBACA,KAAA,QADA,GAEA,IAFA,CAEA,UAAA,GAAA,EAAA;AACA,QAAA,KAAA,CAAA,UAAA,GAAA,KAAA,CAAA,UAAA,CAAA,MAAA,CAAA,GAAA,CAAA,IAAA,CAAA,IAAA,CAAA,CADA,CAEA;;AACA,QAAA,KAAA,CAAA,OAAA,GAAA,KAAA;AACA,QAAA,KAAA,CAAA,IAAA,GAJA,CAKA;;AACA,YAAA,GAAA,CAAA,IAAA,CAAA,IAAA,CAAA,MAAA,KAAA,CAAA,EAAA;AACA,UAAA,KAAA,CAAA,QAAA,GAAA,IAAA;AACA;AACA,OAXA;AAYA,KAhBA;AAiBA,IAAA,OAjBA,mBAiBA,EAjBA,EAiBA;AACA,UAAA,WAAA,GAAA;AACA,QAAA,GAAA,EAAA,CAAA,EAAA,CADA;AAEA,QAAA,IAAA,sBACA,EADA,EACA;AACA,UAAA,KAAA,EAAA,CADA;AAEA,UAAA,SAAA,EAAA;AAFA,SADA;AAFA,OAAA;AASA,UAAA,QAAA,GAAA,MAAA,CAAA,YAAA,CAAA,OAAA,CAAA,UAAA,CAAA;;AACA,UAAA,QAAA,KAAA,IAAA,EAAA;AACA,QAAA,MAAA,CAAA,YAAA,CAAA,OAAA,CAAA,UAAA,EAAA,IAAA,CAAA,SAAA,CAAA,WAAA,CAAA;AACA,OAFA,MAEA;AACA,QAAA,QAAA,GAAA,IAAA,CAAA,KAAA,CAAA,QAAA,CAAA;;AACA,YAAA,QAAA,CAAA,GAAA,CAAA,OAAA,CAAA,EAAA,MAAA,CAAA,CAAA,EAAA;AACA,UAAA,QAAA,CAAA,IAAA,CAAA,EAAA,EAAA,KAAA;AACA,SAFA,MAEA;AACA,UAAA,QAAA,CAAA,GAAA,CAAA,IAAA,CAAA,EAAA;AACA,UAAA,QAAA,CAAA,IAAA,CAAA,EAAA,IAAA;AACA,YAAA,KAAA,EAAA,CADA;AAEA,YAAA,SAAA,EAAA;AAFA,WAAA;AAIA;;AACA,QAAA,MAAA,CAAA,YAAA,CAAA,OAAA,CAAA,UAAA,EAAA,IAAA,CAAA,SAAA,CAAA,QAAA,CAAA;AACA;;AACA,WAAA,aAAA,CACA,IAAA,CAAA,KAAA,CAAA,MAAA,CAAA,YAAA,CAAA,OAAA,CAAA,UAAA,CAAA,EAAA,GAAA,CAAA,MADA;AAGA;AA9CA,IAZA;AA4DA,EAAA,OA5DA,qBA4DA;AAAA;;AACA;AACA,SAAA,KAAA,CAAA,GAAA,CAAA,iBAAA,EAAA,IAAA,CAAA,UAAA,GAAA,EAAA;AACA,MAAA,MAAA,CAAA,aAAA,GAAA,GAAA,CAAA,IAAA,CAAA,IAAA;AACA,KAFA,EAFA,CAKA;;AACA,SAAA,KAAA,CAAA,GAAA,CAAA,mBAAA,EAAA,IAAA,CAAA,UAAA,GAAA,EAAA;AACA,MAAA,MAAA,CAAA,YAAA,GAAA,GAAA,CAAA,IAAA,CAAA,IAAA;AACA,KAFA;AAGA;AArEA,CAAA","sourcesContent":["<template>\r\n  <div class=\"home\">\r\n    <!-- 图片轮播图 -->\r\n    <van-row>\r\n      <van-swipe :autoplay=\"3000\" indicator-color=\"white\">\r\n        <van-swipe-item v-for=\"item in slideshowList\" :key=\"item.id\">\r\n          <van-image height=\"10rem\" fit=\"contain\" :src=\"item.image\" :to=\"item.link\" />\r\n        </van-swipe-item>\r\n      </van-swipe>\r\n    </van-row>\r\n    <!-- 推荐分类 -->\r\n    <van-row>\r\n      <van-grid :column-num=\"4\">\r\n        <van-grid-item v-for=\"item in goodsClasses\" :key=\"item.id\" :text=\"item.cat_name\" />\r\n      </van-grid>\r\n    </van-row>\r\n    <van-list v-model=\"loading\" :finished=\"finished\" finished-text=\"没有更多了\" @load=\"onLoad\">\r\n      <!-- 商品列表 -->\r\n      <van-row class=\"goodsList\" gutter=\"20\">\r\n        <van-col v-for=\"item in goodsLists\" :key=\"item.id\" :span=\"10\" class=\"goods_item\">\r\n          <van-image width=\"100\" height=\"100\" :src=\"item.image\" />\r\n          <div class=\"van-ellipsis goods_text\">{{item.goods_name}}</div>\r\n          <van-button type=\"warning\" size=\"small\" @click=\"addCart(item.id)\">加入购物车</van-button>\r\n          <p class=\"goods_price\">&yen;{{item.price}}</p>\r\n        </van-col>\r\n      </van-row>\r\n    </van-list>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { mapMutations } from 'vuex'\r\nexport default {\r\n  data () {\r\n    return {\r\n      slideshowList: [],\r\n      goodsClasses: [],\r\n      goodsLists: [],\r\n      loading: false,\r\n      finished: false,\r\n      page: 1,\r\n      per_page: 20\r\n    }\r\n  },\r\n  methods: {\r\n    ...mapMutations(['cartNumChange']),\r\n    onLoad () {\r\n      // 调用接口获取首页商品列表\r\n      this.$http\r\n        .get(`/index_goods?page=${this.page}&per_page=${this.per_page}`)\r\n        .then(res => {\r\n          this.goodsLists = this.goodsLists.concat(res.data.data)\r\n          // 加载状态结束\r\n          this.loading = false\r\n          this.page++\r\n          // 数据全部加载完成\r\n          if (res.data.data.length === 0) {\r\n            this.finished = true\r\n          }\r\n        })\r\n    },\r\n    addCart (id) {\r\n      let addCartList = {\r\n        ids: [id],\r\n        info: {\r\n          [id]: {\r\n            count: 1,\r\n            ischecked: false\r\n          }\r\n        }\r\n      }\r\n      let cartList = window.localStorage.getItem('cartList')\r\n      if (cartList === null) {\r\n        window.localStorage.setItem('cartList', JSON.stringify(addCartList))\r\n      } else {\r\n        cartList = JSON.parse(cartList)\r\n        if (cartList.ids.indexOf(id) !== -1) {\r\n          cartList.info[id].count++\r\n        } else {\r\n          cartList.ids.push(id)\r\n          cartList.info[id] = {\r\n            count: 1,\r\n            ischecked: false\r\n          }\r\n        }\r\n        window.localStorage.setItem('cartList', JSON.stringify(cartList))\r\n      }\r\n      this.cartNumChange(\r\n        JSON.parse(window.localStorage.getItem('cartList')).ids.length\r\n      )\r\n    }\r\n  },\r\n  created () {\r\n    // 调用接口获取轮播图数据\r\n    this.$http.get('/main_ad_images').then(res => {\r\n      this.slideshowList = res.data.data\r\n    })\r\n    // 调用接口获取首页商品推荐分类\r\n    this.$http.get('/index_categories').then(res => {\r\n      this.goodsClasses = res.data.data\r\n    })\r\n  }\r\n}\r\n</script>\r\n\r\n<style>\r\n.home {\r\n  padding-bottom: 80px;\r\n}\r\n.goodsList {\r\n  padding: 20px 60px;\r\n}\r\n.goods_item {\r\n  text-align: center;\r\n  margin-bottom: 20px;\r\n}\r\n\r\n.goods_item:nth-child(even) {\r\n  margin-left: 30px;\r\n}\r\n.goods_text {\r\n  margin: 10px 0;\r\n}\r\n.goods_price {\r\n  margin: 0;\r\n  padding: 5px 0;\r\n  color: red;\r\n}\r\n</style>\r\n"],"sourceRoot":"src/views"}]}