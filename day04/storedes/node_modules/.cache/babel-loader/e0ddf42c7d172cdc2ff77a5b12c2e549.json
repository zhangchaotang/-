{"remainingRequest":"e:\\全栈\\semester_03\\semester_03\\day04\\storedes\\node_modules\\babel-loader\\lib\\index.js!e:\\全栈\\semester_03\\semester_03\\day04\\storedes\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!e:\\全栈\\semester_03\\semester_03\\day04\\storedes\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!e:\\全栈\\semester_03\\semester_03\\day04\\storedes\\src\\views\\ShoppingCart.vue?vue&type=script&lang=js&","dependencies":[{"path":"e:\\全栈\\semester_03\\semester_03\\day04\\storedes\\src\\views\\ShoppingCart.vue","mtime":1574753702281},{"path":"e:\\全栈\\semester_03\\semester_03\\day04\\storedes\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"e:\\全栈\\semester_03\\semester_03\\day04\\storedes\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"e:\\全栈\\semester_03\\semester_03\\day04\\storedes\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"e:\\全栈\\semester_03\\semester_03\\day04\\storedes\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZmluZC1pbmRleCI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LmZvci1lYWNoIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuam9pbiI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LnNwbGljZSI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmZ1bmN0aW9uLm5hbWUiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy93ZWIuZG9tLWNvbGxlY3Rpb25zLmZvci1lYWNoIjsKLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KaW1wb3J0IHsgRGlhbG9nIH0gZnJvbSAndmFudCc7CmV4cG9ydCBkZWZhdWx0IHsKICBkYXRhOiBmdW5jdGlvbiBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgY2FydExpc3Q6IEpTT04ucGFyc2Uod2luZG93LmxvY2FsU3RvcmFnZS5nZXRJdGVtKCdjYXJ0TGlzdCcpKSwKICAgICAgZ29vZHNMaXN0OiBbXSwKICAgICAgY2hlY2tlZDogZmFsc2UKICAgIH07CiAgfSwKICBtZXRob2RzOiB7CiAgICBnZXRDYXJ0OiBmdW5jdGlvbiBnZXRDYXJ0KCkgewogICAgICB2YXIgX3RoaXMgPSB0aGlzOwoKICAgICAgdGhpcy4kaHR0cC5nZXQoJy9nb29kcycsIHsKICAgICAgICBwYXJhbXM6IHsKICAgICAgICAgIGdvb2RzTGlzdDogdGhpcy5jYXJ0TGlzdC5pZHMuam9pbigpCiAgICAgICAgfQogICAgICB9KS50aGVuKGZ1bmN0aW9uIChyZXMpIHsKICAgICAgICBfdGhpcy5nb29kc0xpc3QgPSByZXMuZGF0YS5kYXRhOwogICAgICAgIGNvbnNvbGUubG9nKF90aGlzLmdvb2RzTGlzdCk7CiAgICAgIH0pOwogICAgfSwKICAgIC8vIOWIoOmZpOi0reeJqei9pgogICAgb25DbG9zZTogZnVuY3Rpb24gb25DbG9zZShjbGlja1Bvc2l0aW9uLCBpbnN0YW5jZSwgZGV0YWlsKSB7CiAgICAgIHZhciBfdGhpczIgPSB0aGlzOwoKICAgICAgaWYgKGNsaWNrUG9zaXRpb24gIT09ICdyaWdodCcpIHsKICAgICAgICAvLyDngrnlh7vlhbbku5bkvY3nva7lkJHlj7PlsZXlvIDliKDpmaTmjInpkq7pmpDol48KICAgICAgICByZXR1cm4gaW5zdGFuY2UuY2xvc2UoKTsKICAgICAgfQoKICAgICAgRGlhbG9nLmNvbmZpcm0oewogICAgICAgIGNsb3NlT25DbGlja092ZXJsYXk6IHRydWUsCiAgICAgICAgbWVzc2FnZTogJ+ehruWumuWIoOmZpOWQl++8nycKICAgICAgfSkudGhlbihmdW5jdGlvbiAoKSB7CiAgICAgICAgdmFyIGkgPSBfdGhpczIuY2FydExpc3QuaWRzLmZpbmRJbmRleChmdW5jdGlvbiAoaXRlbSkgewogICAgICAgICAgcmV0dXJuIGl0ZW0gPT09IGRldGFpbC5uYW1lOwogICAgICAgIH0pOwoKICAgICAgICBfdGhpczIuY2FydExpc3QuaWRzLnNwbGljZShpLCAxKTsKCiAgICAgICAgZGVsZXRlIF90aGlzMi5jYXJ0TGlzdC5pbmZvW2RldGFpbC5uYW1lXTsKCiAgICAgICAgX3RoaXMyLmdldENhcnQoKTsKCiAgICAgICAgaW5zdGFuY2UuY2xvc2UoKTsKICAgICAgfSkuY2F0Y2goZnVuY3Rpb24gKCkgewogICAgICAgIC8vIOeCueWHu+WPlua2iOaMiemSriDlkJHlj7PlsZXlvIDliKDpmaTmjInpkq7pmpDol48KICAgICAgICBpbnN0YW5jZS5jbG9zZSgpOwogICAgICB9KTsKICAgIH0KICB9LAogIHdhdGNoOiB7CiAgICBjYXJ0TGlzdDogewogICAgICBkZWVwOiB0cnVlLAogICAgICBoYW5kbGVyOiBmdW5jdGlvbiBoYW5kbGVyKCkgewogICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCdjYXJ0TGlzdCcsIEpTT04uc3RyaW5naWZ5KHRoaXMuY2FydExpc3QpKTsKICAgICAgfQogICAgfQogIH0sCiAgY29tcHV0ZWQ6IHsKICAgIHRvdGFsUHJpY2U6IGZ1bmN0aW9uIHRvdGFsUHJpY2UoKSB7CiAgICAgIHZhciBfdGhpczMgPSB0aGlzOwoKICAgICAgdmFyIHN1bSA9IDA7CiAgICAgIHRoaXMuZ29vZHNMaXN0LmZvckVhY2goZnVuY3Rpb24gKGl0ZW0sIGluZGV4KSB7CiAgICAgICAgaWYgKF90aGlzMy5jYXJ0TGlzdC5pbmZvW2l0ZW0uaWRdLmlzY2hlY2tlZCkgewogICAgICAgICAgc3VtICs9IGl0ZW0ucHJpY2UgKiBfdGhpczMuY2FydExpc3QuaW5mb1tpdGVtLmlkXS5jb3VudCAqIDEwMDsKICAgICAgICB9CiAgICAgIH0pOwogICAgICByZXR1cm4gc3VtOwogICAgfSwKICAgIGNoZWNrQWxsOiB7CiAgICAgIGdldDogZnVuY3Rpb24gZ2V0KCkgewogICAgICAgIGZvciAodmFyIGkgaW4gdGhpcy5jYXJ0TGlzdC5pbmZvKSB7CiAgICAgICAgICBpZiAoIXRoaXMuY2FydExpc3QuaW5mb1tpXS5pc2NoZWNrZWQpIHsKICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICAgICAgfQogICAgICAgIH0KCiAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgIH0sCiAgICAgIHNldDogZnVuY3Rpb24gc2V0KG5ld1ZhbHVlKSB7CiAgICAgICAgZm9yICh2YXIgaSBpbiB0aGlzLmNhcnRMaXN0LmluZm8pIHsKICAgICAgICAgIHRoaXMuY2FydExpc3QuaW5mb1tpXS5pc2NoZWNrZWQgPSBuZXdWYWx1ZTsKICAgICAgICB9CiAgICAgIH0KICAgIH0KICB9LAogIGNyZWF0ZWQ6IGZ1bmN0aW9uIGNyZWF0ZWQoKSB7CiAgICB0aGlzLmdldENhcnQoKTsKICB9Cn07"},{"version":3,"sources":["ShoppingCart.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\r\n  <div class=\"shoppingCart\">\r\n    <!-- 页头 -->\r\n    <van-row>\r\n      <van-nav-bar title=\"购物车\" />\r\n    </van-row>\r\n    <!-- 清单列 -->\r\n    <van-row>\r\n      <van-row class=\"cart_item\" v-for=\"(item) in goodsList\" :key=\"item.id\">\r\n        <van-swipe-cell :on-close=\"onClose\" :name=\"item.id\" class=\"van-clearfix\">\r\n          <van-col :span=\"2\" class=\"checkbox\">\r\n          <van-checkbox v-model=\"cartList.info[item.id].ischecked\" />\r\n        </van-col>\r\n        <van-col :span=\"22\">\r\n          <van-card :price=\"item.price\" :title=\"item.goods_name\" :thumb=\"item.image\">\r\n            <div slot=\"num\">\r\n              <van-stepper v-model=\"cartList.info[item.id].count\" />\r\n            </div>\r\n            <div slot=\"bottom\" class=\"xiaoji\">\r\n              <span class=\"xiaoji2\">小计:</span>\r\n              &yen;{{item.price * cartList.info[item.id].count}}元\r\n            </div>\r\n          </van-card>\r\n        </van-col>\r\n\r\n          <template slot=\"right\">\r\n            <van-button square type=\"danger\" text=\"删除\" />\r\n          </template>\r\n        </van-swipe-cell>\r\n\r\n      </van-row>\r\n    </van-row>\r\n    <!--合计  -->\r\n    <van-row class=\"heji\">\r\n      <van-submit-bar :price=\"totalPrice\" button-text=\"提交订单\">\r\n        <van-checkbox v-model=\"checkAll\">全选</van-checkbox>\r\n        <span slot=\"tip\">\r\n          你的收货地址不支持同城送,\r\n          <span>修改地址</span>\r\n        </span>\r\n      </van-submit-bar>\r\n    </van-row>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { Dialog } from 'vant'\r\nexport default {\r\n  data () {\r\n    return {\r\n      cartList: JSON.parse(window.localStorage.getItem('cartList')),\r\n      goodsList: [],\r\n      checked: false\r\n    }\r\n  },\r\n  methods: {\r\n    getCart () {\r\n      this.$http\r\n        .get('/goods', {\r\n          params: {\r\n            goodsList: this.cartList.ids.join()\r\n          }\r\n        })\r\n        .then(res => {\r\n          this.goodsList = res.data.data\r\n          console.log(this.goodsList)\r\n        })\r\n    },\r\n    // 删除购物车\r\n    onClose (clickPosition, instance, detail) {\r\n      if (clickPosition !== 'right') {\r\n        // 点击其他位置向右展开删除按钮隐藏\r\n        return instance.close()\r\n      }\r\n      Dialog.confirm({\r\n        closeOnClickOverlay: true,\r\n        message: '确定删除吗？'\r\n      }).then(() => {\r\n        let i = this.cartList.ids.findIndex(item => {\r\n          return item === detail.name\r\n        })\r\n\r\n        this.cartList.ids.splice(i, 1)\r\n        delete this.cartList.info[detail.name]\r\n        this.getCart()\r\n        instance.close()\r\n      }).catch(() => { // 点击取消按钮 向右展开删除按钮隐藏\r\n        instance.close()\r\n      })\r\n    }\r\n  },\r\n  watch: {\r\n    cartList: {\r\n      deep: true,\r\n      handler: function () {\r\n        localStorage.setItem('cartList', JSON.stringify(this.cartList))\r\n      }\r\n    }\r\n  },\r\n  computed: {\r\n    totalPrice: function () {\r\n      let sum = 0\r\n      this.goodsList.forEach((item, index) => {\r\n        if (this.cartList.info[item.id].ischecked) {\r\n          sum += item.price * this.cartList.info[item.id].count * 100\r\n        }\r\n      })\r\n      return sum\r\n    },\r\n    checkAll: {\r\n      get: function () {\r\n        for (let i in this.cartList.info) {\r\n          if (!this.cartList.info[i].ischecked) {\r\n            return false\r\n          }\r\n        }\r\n        return true\r\n      },\r\n      set: function (newValue) {\r\n        for (let i in this.cartList.info) {\r\n          this.cartList.info[i].ischecked = newValue\r\n        }\r\n      }\r\n    }\r\n  },\r\n  created () {\r\n    this.getCart()\r\n  }\r\n}\r\n</script>\r\n\r\n<style>\r\n/* 小计 */\r\n.xiaoji {\r\n  display: block;\r\n  text-align: right;\r\n  margin-top: 20px;\r\n}\r\n.xiaoji2 {\r\n  padding-right: 10px;\r\n}\r\n\r\n.checkbox {\r\n  position: relative;\r\n  left: 6px;\r\n  top: 44px;\r\n}\r\n\r\n.van-submit-bar {\r\n  margin-bottom: 50px;\r\n}\r\n\r\n.heji {\r\n  height: 84px;\r\n  margin-bottom: 50px;\r\n}\r\n.cart_item {\r\n  padding: 10px 0;\r\n}\r\n\r\n.cart_item .van-button {\r\n  height: 106px;\r\n}\r\n</style>\r\n"],"sourceRoot":"src/views"}]}