{"remainingRequest":"e:\\全栈\\semester_03\\semester_03\\day03\\storedes2\\node_modules\\babel-loader\\lib\\index.js!e:\\全栈\\semester_03\\semester_03\\day03\\storedes2\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!e:\\全栈\\semester_03\\semester_03\\day03\\storedes2\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!e:\\全栈\\semester_03\\semester_03\\day03\\storedes2\\src\\views\\Home.vue?vue&type=script&lang=js&","dependencies":[{"path":"e:\\全栈\\semester_03\\semester_03\\day03\\storedes2\\src\\views\\Home.vue","mtime":1573541474499},{"path":"e:\\全栈\\semester_03\\semester_03\\day03\\storedes2\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"e:\\全栈\\semester_03\\semester_03\\day03\\storedes2\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"e:\\全栈\\semester_03\\semester_03\\day03\\storedes2\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"e:\\全栈\\semester_03\\semester_03\\day03\\storedes2\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3ltYm9sIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuY29uY2F0IjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZmlsdGVyIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZm9yLWVhY2giOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5pbmRleC1vZiI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLm9iamVjdC5nZXQtb3duLXByb3BlcnR5LWRlc2NyaXB0b3IiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5vYmplY3QuZ2V0LW93bi1wcm9wZXJ0eS1kZXNjcmlwdG9ycyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLm9iamVjdC5rZXlzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvd2ViLmRvbS1jb2xsZWN0aW9ucy5mb3ItZWFjaCI7CmltcG9ydCBfZGVmaW5lUHJvcGVydHkgZnJvbSAiZTpcXFx1NTE2OFx1NjgwOFxcc2VtZXN0ZXJfMDNcXHNlbWVzdGVyXzAzXFxkYXkwM1xcc3RvcmVkZXMyXFxub2RlX21vZHVsZXNcXEBiYWJlbFxccnVudGltZS1jb3JlanMzL2hlbHBlcnMvZXNtL2RlZmluZVByb3BlcnR5IjsKCmZ1bmN0aW9uIG93bktleXMob2JqZWN0LCBlbnVtZXJhYmxlT25seSkgeyB2YXIga2V5cyA9IE9iamVjdC5rZXlzKG9iamVjdCk7IGlmIChPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKSB7IHZhciBzeW1ib2xzID0gT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scyhvYmplY3QpOyBpZiAoZW51bWVyYWJsZU9ubHkpIHN5bWJvbHMgPSBzeW1ib2xzLmZpbHRlcihmdW5jdGlvbiAoc3ltKSB7IHJldHVybiBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKG9iamVjdCwgc3ltKS5lbnVtZXJhYmxlOyB9KTsga2V5cy5wdXNoLmFwcGx5KGtleXMsIHN5bWJvbHMpOyB9IHJldHVybiBrZXlzOyB9CgpmdW5jdGlvbiBfb2JqZWN0U3ByZWFkKHRhcmdldCkgeyBmb3IgKHZhciBpID0gMTsgaSA8IGFyZ3VtZW50cy5sZW5ndGg7IGkrKykgeyB2YXIgc291cmNlID0gYXJndW1lbnRzW2ldICE9IG51bGwgPyBhcmd1bWVudHNbaV0gOiB7fTsgaWYgKGkgJSAyKSB7IG93bktleXMoc291cmNlLCB0cnVlKS5mb3JFYWNoKGZ1bmN0aW9uIChrZXkpIHsgX2RlZmluZVByb3BlcnR5KHRhcmdldCwga2V5LCBzb3VyY2Vba2V5XSk7IH0pOyB9IGVsc2UgaWYgKE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3JzKSB7IE9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKHRhcmdldCwgT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcnMoc291cmNlKSk7IH0gZWxzZSB7IG93bktleXMoc291cmNlKS5mb3JFYWNoKGZ1bmN0aW9uIChrZXkpIHsgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwga2V5LCBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKHNvdXJjZSwga2V5KSk7IH0pOyB9IH0gcmV0dXJuIHRhcmdldDsgfQoKLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KaW1wb3J0IHsgbWFwTXV0YXRpb25zIH0gZnJvbSAndnVleCc7CmV4cG9ydCBkZWZhdWx0IHsKICBkYXRhOiBmdW5jdGlvbiBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgc2xpZGVzaG93TGlzdDogW10sCiAgICAgIGdvb2RzQ2xhc3NlczogW10sCiAgICAgIGdvb2RzTGlzdHM6IFtdLAogICAgICBsb2FkaW5nOiBmYWxzZSwKICAgICAgZmluaXNoZWQ6IGZhbHNlLAogICAgICBwYWdlOiAxLAogICAgICBwZXJfcGFnZTogMjAKICAgIH07CiAgfSwKICBtZXRob2RzOiBfb2JqZWN0U3ByZWFkKHt9LCBtYXBNdXRhdGlvbnMoWydjYXJ0TnVtQ2hhbmdlJ10pLCB7CiAgICBvbkxvYWQ6IGZ1bmN0aW9uIG9uTG9hZCgpIHsKICAgICAgdmFyIF90aGlzID0gdGhpczsKCiAgICAgIC8vIOiwg+eUqOaOpeWPo+iOt+WPlummlumhteWVhuWTgeWIl+ihqAogICAgICB0aGlzLiRodHRwLmdldCgiL2luZGV4X2dvb2RzP3BhZ2U9Ii5jb25jYXQodGhpcy5wYWdlLCAiJnBlcl9wYWdlPSIpLmNvbmNhdCh0aGlzLnBlcl9wYWdlKSkudGhlbihmdW5jdGlvbiAocmVzKSB7CiAgICAgICAgX3RoaXMuZ29vZHNMaXN0cyA9IF90aGlzLmdvb2RzTGlzdHMuY29uY2F0KHJlcy5kYXRhLmRhdGEpOyAvLyDliqDovb3nirbmgIHnu5PmnZ8KCiAgICAgICAgX3RoaXMubG9hZGluZyA9IGZhbHNlOwogICAgICAgIF90aGlzLnBhZ2UrKzsgLy8g5pWw5o2u5YWo6YOo5Yqg6L295a6M5oiQCgogICAgICAgIGlmIChyZXMuZGF0YS5kYXRhLmxlbmd0aCA9PT0gMCkgewogICAgICAgICAgX3RoaXMuZmluaXNoZWQgPSB0cnVlOwogICAgICAgIH0KICAgICAgfSk7CiAgICB9LAogICAgYWRkQ2FydDogZnVuY3Rpb24gYWRkQ2FydChpZCkgewogICAgICB2YXIgYWRkQ2FydExpc3QgPSB7CiAgICAgICAgaWRzOiBbaWRdLAogICAgICAgIGluZm86IF9kZWZpbmVQcm9wZXJ0eSh7fSwgaWQsIHsKICAgICAgICAgIGNvdW50OiAxLAogICAgICAgICAgaXNjaGVja2VkOiBmYWxzZQogICAgICAgIH0pCiAgICAgIH07CiAgICAgIHZhciBjYXJ0TGlzdCA9IHdpbmRvdy5sb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnY2FydExpc3QnKTsKCiAgICAgIGlmIChjYXJ0TGlzdCA9PT0gbnVsbCkgewogICAgICAgIHdpbmRvdy5sb2NhbFN0b3JhZ2Uuc2V0SXRlbSgnY2FydExpc3QnLCBKU09OLnN0cmluZ2lmeShhZGRDYXJ0TGlzdCkpOwogICAgICB9IGVsc2UgewogICAgICAgIGNhcnRMaXN0ID0gSlNPTi5wYXJzZShjYXJ0TGlzdCk7CgogICAgICAgIGlmIChjYXJ0TGlzdC5pZHMuaW5kZXhPZihpZCkgIT09IC0xKSB7CiAgICAgICAgICBjYXJ0TGlzdC5pbmZvW2lkXS5jb3VudCsrOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBjYXJ0TGlzdC5pZHMucHVzaChpZCk7CiAgICAgICAgICBjYXJ0TGlzdC5pbmZvW2lkXSA9IHsKICAgICAgICAgICAgY291bnQ6IDEsCiAgICAgICAgICAgIGlzY2hlY2tlZDogZmFsc2UKICAgICAgICAgIH07CiAgICAgICAgfQoKICAgICAgICB3aW5kb3cubG9jYWxTdG9yYWdlLnNldEl0ZW0oJ2NhcnRMaXN0JywgSlNPTi5zdHJpbmdpZnkoY2FydExpc3QpKTsKICAgICAgfQoKICAgICAgdGhpcy5jYXJ0TnVtQ2hhbmdlKEpTT04ucGFyc2Uod2luZG93LmxvY2FsU3RvcmFnZS5nZXRJdGVtKCdjYXJ0TGlzdCcpKS5pZHMubGVuZ3RoKTsKICAgIH0KICB9KSwKICBjcmVhdGVkOiBmdW5jdGlvbiBjcmVhdGVkKCkgewogICAgdmFyIF90aGlzMiA9IHRoaXM7CgogICAgLy8g6LCD55So5o6l5Y+j6I635Y+W6L2u5pKt5Zu+5pWw5o2uCiAgICB0aGlzLiRodHRwLmdldCgnL21haW5fYWRfaW1hZ2VzJykudGhlbihmdW5jdGlvbiAocmVzKSB7CiAgICAgIF90aGlzMi5zbGlkZXNob3dMaXN0ID0gcmVzLmRhdGEuZGF0YTsKICAgIH0pOyAvLyDosIPnlKjmjqXlj6Pojrflj5bpppbpobXllYblk4HmjqjojZDliIbnsbsKCiAgICB0aGlzLiRodHRwLmdldCgnL2luZGV4X2NhdGVnb3JpZXMnKS50aGVuKGZ1bmN0aW9uIChyZXMpIHsKICAgICAgX3RoaXMyLmdvb2RzQ2xhc3NlcyA9IHJlcy5kYXRhLmRhdGE7CiAgICB9KTsKICB9Cn07"},{"version":3,"sources":["Home.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA+BA,SAAA,YAAA,QAAA,MAAA;AACA,eAAA;AACA,EAAA,IADA,kBACA;AACA,WAAA;AACA,MAAA,aAAA,EAAA,EADA;AAEA,MAAA,YAAA,EAAA,EAFA;AAGA,MAAA,UAAA,EAAA,EAHA;AAIA,MAAA,OAAA,EAAA,KAJA;AAKA,MAAA,QAAA,EAAA,KALA;AAMA,MAAA,IAAA,EAAA,CANA;AAOA,MAAA,QAAA,EAAA;AAPA,KAAA;AASA,GAXA;AAYA,EAAA,OAAA,oBACA,YAAA,CAAA,CAAA,eAAA,CAAA,CADA;AAEA,IAAA,MAFA,oBAEA;AAAA;;AACA;AACA,WAAA,KAAA,CACA,GADA,6BACA,KAAA,IADA,uBACA,KAAA,QADA,GAEA,IAFA,CAEA,UAAA,GAAA,EAAA;AACA,QAAA,KAAA,CAAA,UAAA,GAAA,KAAA,CAAA,UAAA,CAAA,MAAA,CAAA,GAAA,CAAA,IAAA,CAAA,IAAA,CAAA,CADA,CAEA;;AACA,QAAA,KAAA,CAAA,OAAA,GAAA,KAAA;AACA,QAAA,KAAA,CAAA,IAAA,GAJA,CAKA;;AACA,YAAA,GAAA,CAAA,IAAA,CAAA,IAAA,CAAA,MAAA,KAAA,CAAA,EAAA;AACA,UAAA,KAAA,CAAA,QAAA,GAAA,IAAA;AACA;AACA,OAXA;AAYA,KAhBA;AAiBA,IAAA,OAjBA,mBAiBA,EAjBA,EAiBA;AACA,UAAA,WAAA,GAAA;AACA,QAAA,GAAA,EAAA,CAAA,EAAA,CADA;AAEA,QAAA,IAAA,sBACA,EADA,EACA;AACA,UAAA,KAAA,EAAA,CADA;AAEA,UAAA,SAAA,EAAA;AAFA,SADA;AAFA,OAAA;AASA,UAAA,QAAA,GAAA,MAAA,CAAA,YAAA,CAAA,OAAA,CAAA,UAAA,CAAA;;AACA,UAAA,QAAA,KAAA,IAAA,EAAA;AACA,QAAA,MAAA,CAAA,YAAA,CAAA,OAAA,CAAA,UAAA,EAAA,IAAA,CAAA,SAAA,CAAA,WAAA,CAAA;AACA,OAFA,MAEA;AACA,QAAA,QAAA,GAAA,IAAA,CAAA,KAAA,CAAA,QAAA,CAAA;;AACA,YAAA,QAAA,CAAA,GAAA,CAAA,OAAA,CAAA,EAAA,MAAA,CAAA,CAAA,EAAA;AACA,UAAA,QAAA,CAAA,IAAA,CAAA,EAAA,EAAA,KAAA;AACA,SAFA,MAEA;AACA,UAAA,QAAA,CAAA,GAAA,CAAA,IAAA,CAAA,EAAA;AACA,UAAA,QAAA,CAAA,IAAA,CAAA,EAAA,IAAA;AACA,YAAA,KAAA,EAAA,CADA;AAEA,YAAA,SAAA,EAAA;AAFA,WAAA;AAIA;;AACA,QAAA,MAAA,CAAA,YAAA,CAAA,OAAA,CAAA,UAAA,EAAA,IAAA,CAAA,SAAA,CAAA,QAAA,CAAA;AACA;;AACA,WAAA,aAAA,CACA,IAAA,CAAA,KAAA,CAAA,MAAA,CAAA,YAAA,CAAA,OAAA,CAAA,UAAA,CAAA,EAAA,GAAA,CAAA,MADA;AAGA;AA9CA,IAZA;AA4DA,EAAA,OA5DA,qBA4DA;AAAA;;AACA;AACA,SAAA,KAAA,CAAA,GAAA,CAAA,iBAAA,EAAA,IAAA,CAAA,UAAA,GAAA,EAAA;AACA,MAAA,MAAA,CAAA,aAAA,GAAA,GAAA,CAAA,IAAA,CAAA,IAAA;AACA,KAFA,EAFA,CAKA;;AACA,SAAA,KAAA,CAAA,GAAA,CAAA,mBAAA,EAAA,IAAA,CAAA,UAAA,GAAA,EAAA;AACA,MAAA,MAAA,CAAA,YAAA,GAAA,GAAA,CAAA,IAAA,CAAA,IAAA;AACA,KAFA;AAGA;AArEA,CAAA","sourcesContent":["<template>\r\n  <div class=\"home\">\r\n    <!-- 图片轮播图 -->\r\n    <van-row>\r\n      <van-swipe :autoplay=\"3000\" indicator-color=\"white\">\r\n        <van-swipe-item v-for=\"item in slideshowList\" :key=\"item.id\">\r\n          <van-image height=\"10rem\" fit=\"contain\" :src=\"item.image\" :to=\"item.link\" />\r\n        </van-swipe-item>\r\n      </van-swipe>\r\n    </van-row>\r\n    <!-- 推荐分类 -->\r\n    <van-row>\r\n      <van-grid :column-num=\"4\">\r\n        <van-grid-item v-for=\"item in goodsClasses\" :key=\"item.id\" :text=\"item.cat_name\" />\r\n      </van-grid>\r\n    </van-row>\r\n    <van-list v-model=\"loading\" :finished=\"finished\" finished-text=\"没有更多了\" @load=\"onLoad\">\r\n      <!-- 商品列表 -->\r\n      <van-row class=\"goodsList\" gutter=\"20\">\r\n        <van-col v-for=\"item in goodsLists\" :key=\"item.id\" :span=\"10\" class=\"goods_item\">\r\n          <van-image width=\"100\" height=\"100\" :src=\"item.image\" />\r\n          <div class=\"van-ellipsis goods_text\">{{item.goods_name}}</div>\r\n          <van-button type=\"warning\" size=\"small\" @click=\"addCart(item.id)\">加入购物车</van-button>\r\n          <p class=\"goods_price\">&yen;{{item.price}}</p>\r\n        </van-col>\r\n      </van-row>\r\n    </van-list>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { mapMutations } from 'vuex'\r\nexport default {\r\n  data () {\r\n    return {\r\n      slideshowList: [],\r\n      goodsClasses: [],\r\n      goodsLists: [],\r\n      loading: false,\r\n      finished: false,\r\n      page: 1,\r\n      per_page: 20\r\n    }\r\n  },\r\n  methods: {\r\n    ...mapMutations(['cartNumChange']),\r\n    onLoad () {\r\n      // 调用接口获取首页商品列表\r\n      this.$http\r\n        .get(`/index_goods?page=${this.page}&per_page=${this.per_page}`)\r\n        .then(res => {\r\n          this.goodsLists = this.goodsLists.concat(res.data.data)\r\n          // 加载状态结束\r\n          this.loading = false\r\n          this.page++\r\n          // 数据全部加载完成\r\n          if (res.data.data.length === 0) {\r\n            this.finished = true\r\n          }\r\n        })\r\n    },\r\n    addCart (id) {\r\n      let addCartList = {\r\n        ids: [id],\r\n        info: {\r\n          [id]: {\r\n            count: 1,\r\n            ischecked: false\r\n          }\r\n        }\r\n      }\r\n      let cartList = window.localStorage.getItem('cartList')\r\n      if (cartList === null) {\r\n        window.localStorage.setItem('cartList', JSON.stringify(addCartList))\r\n      } else {\r\n        cartList = JSON.parse(cartList)\r\n        if (cartList.ids.indexOf(id) !== -1) {\r\n          cartList.info[id].count++\r\n        } else {\r\n          cartList.ids.push(id)\r\n          cartList.info[id] = {\r\n            count: 1,\r\n            ischecked: false\r\n          }\r\n        }\r\n        window.localStorage.setItem('cartList', JSON.stringify(cartList))\r\n      }\r\n      this.cartNumChange(\r\n        JSON.parse(window.localStorage.getItem('cartList')).ids.length\r\n      )\r\n    }\r\n  },\r\n  created () {\r\n    // 调用接口获取轮播图数据\r\n    this.$http.get('/main_ad_images').then(res => {\r\n      this.slideshowList = res.data.data\r\n    })\r\n    // 调用接口获取首页商品推荐分类\r\n    this.$http.get('/index_categories').then(res => {\r\n      this.goodsClasses = res.data.data\r\n    })\r\n  }\r\n}\r\n</script>\r\n\r\n<style>\r\n.home {\r\n  padding-bottom: 80px;\r\n}\r\n.goodsList {\r\n  padding: 20px 60px;\r\n}\r\n.goods_item {\r\n  text-align: center;\r\n  margin-bottom: 20px;\r\n}\r\n\r\n.goods_item:nth-child(even) {\r\n  margin-left: 30px;\r\n}\r\n.goods_text {\r\n  margin: 10px 0;\r\n}\r\n.goods_price {\r\n  margin: 0;\r\n  padding: 5px 0;\r\n  color: red;\r\n}\r\n</style>\r\n"],"sourceRoot":"src/views"}]}