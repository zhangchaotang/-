{"remainingRequest":"e:\\全栈\\semester_03\\semester_03\\day03\\storedes\\node_modules\\babel-loader\\lib\\index.js!e:\\全栈\\semester_03\\semester_03\\day03\\storedes\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!e:\\全栈\\semester_03\\semester_03\\day03\\storedes\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!e:\\全栈\\semester_03\\semester_03\\day03\\storedes\\src\\views\\Home.vue?vue&type=script&lang=js&","dependencies":[{"path":"e:\\全栈\\semester_03\\semester_03\\day03\\storedes\\src\\views\\Home.vue","mtime":1583589153911},{"path":"e:\\全栈\\semester_03\\semester_03\\day03\\storedes\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1583588729406},{"path":"e:\\全栈\\semester_03\\semester_03\\day03\\storedes\\node_modules\\babel-loader\\lib\\index.js","mtime":1583588727663},{"path":"e:\\全栈\\semester_03\\semester_03\\day03\\storedes\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1583588729406},{"path":"e:\\全栈\\semester_03\\semester_03\\day03\\storedes\\node_modules\\vue-loader\\lib\\index.js","mtime":1583588770241}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3ltYm9sIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuY29uY2F0IjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZmlsdGVyIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZmluZC1pbmRleCI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LmZvci1lYWNoIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LmdldC1vd24tcHJvcGVydHktZGVzY3JpcHRvciI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLm9iamVjdC5nZXQtb3duLXByb3BlcnR5LWRlc2NyaXB0b3JzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LmtleXMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy93ZWIuZG9tLWNvbGxlY3Rpb25zLmZvci1lYWNoIjsKaW1wb3J0IF9kZWZpbmVQcm9wZXJ0eSBmcm9tICJlOlxcXHU1MTY4XHU2ODA4XFxzZW1lc3Rlcl8wM1xcc2VtZXN0ZXJfMDNcXGRheTAzXFxzdG9yZWRlc1xcbm9kZV9tb2R1bGVzXFxAYmFiZWxcXHJ1bnRpbWUtY29yZWpzMy9oZWxwZXJzL2VzbS9kZWZpbmVQcm9wZXJ0eSI7CgpmdW5jdGlvbiBvd25LZXlzKG9iamVjdCwgZW51bWVyYWJsZU9ubHkpIHsgdmFyIGtleXMgPSBPYmplY3Qua2V5cyhvYmplY3QpOyBpZiAoT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scykgeyB2YXIgc3ltYm9scyA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMob2JqZWN0KTsgaWYgKGVudW1lcmFibGVPbmx5KSBzeW1ib2xzID0gc3ltYm9scy5maWx0ZXIoZnVuY3Rpb24gKHN5bSkgeyByZXR1cm4gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihvYmplY3QsIHN5bSkuZW51bWVyYWJsZTsgfSk7IGtleXMucHVzaC5hcHBseShrZXlzLCBzeW1ib2xzKTsgfSByZXR1cm4ga2V5czsgfQoKZnVuY3Rpb24gX29iamVjdFNwcmVhZCh0YXJnZXQpIHsgZm9yICh2YXIgaSA9IDE7IGkgPCBhcmd1bWVudHMubGVuZ3RoOyBpKyspIHsgdmFyIHNvdXJjZSA9IGFyZ3VtZW50c1tpXSAhPSBudWxsID8gYXJndW1lbnRzW2ldIDoge307IGlmIChpICUgMikgeyBvd25LZXlzKHNvdXJjZSwgdHJ1ZSkuZm9yRWFjaChmdW5jdGlvbiAoa2V5KSB7IF9kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGtleSwgc291cmNlW2tleV0pOyB9KTsgfSBlbHNlIGlmIChPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9ycykgeyBPYmplY3QuZGVmaW5lUHJvcGVydGllcyh0YXJnZXQsIE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3JzKHNvdXJjZSkpOyB9IGVsc2UgeyBvd25LZXlzKHNvdXJjZSkuZm9yRWFjaChmdW5jdGlvbiAoa2V5KSB7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGtleSwgT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihzb3VyY2UsIGtleSkpOyB9KTsgfSB9IHJldHVybiB0YXJnZXQ7IH0KCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCmltcG9ydCB7IG1hcE11dGF0aW9ucyB9IGZyb20gJ3Z1ZXgnOwpleHBvcnQgZGVmYXVsdCB7CiAgZGF0YTogZnVuY3Rpb24gZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIHNsaWRlc2hvd0xpc3Q6IFtdLAogICAgICBnb29kc0NsYXNzZXM6IFtdLAogICAgICBnb29kc0xpc3RzOiBbXSwKICAgICAgbG9hZGluZzogZmFsc2UsCiAgICAgIGZpbmlzaGVkOiBmYWxzZSwKICAgICAgcGFnZTogMSwKICAgICAgcGVyX3BhZ2U6IDIwCiAgICB9OwogIH0sCiAgbWV0aG9kczogX29iamVjdFNwcmVhZCh7fSwgbWFwTXV0YXRpb25zKFsnY2FydE51bUNoYW5nZSddKSwgewogICAgb25Mb2FkOiBmdW5jdGlvbiBvbkxvYWQoKSB7CiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgICAvLyDosIPnlKjmjqXlj6Pojrflj5bpppbpobXllYblk4HliJfooagKICAgICAgdGhpcy4kaHR0cC5nZXQoIi9pbmRleF9nb29kcz9wYWdlPSIuY29uY2F0KHRoaXMucGFnZSwgIiZwZXJfcGFnZT0iKS5jb25jYXQodGhpcy5wZXJfcGFnZSkpLnRoZW4oZnVuY3Rpb24gKHJlcykgewogICAgICAgIF90aGlzLmdvb2RzTGlzdHMgPSBfdGhpcy5nb29kc0xpc3RzLmNvbmNhdChyZXMuZGF0YS5kYXRhKTsgLy8g5Yqg6L2954q25oCB57uT5p2fCgogICAgICAgIF90aGlzLmxvYWRpbmcgPSBmYWxzZTsKICAgICAgICBfdGhpcy5wYWdlKys7IC8vIOaVsOaNruWFqOmDqOWKoOi9veWujOaIkAoKICAgICAgICBpZiAocmVzLmRhdGEuZGF0YS5sZW5ndGggPT09IDApIHsKICAgICAgICAgIF90aGlzLmZpbmlzaGVkID0gdHJ1ZTsKICAgICAgICB9CiAgICAgIH0pOwogICAgfSwKICAgIGFkZENhcnQ6IGZ1bmN0aW9uIGFkZENhcnQoaWQpIHsKICAgICAgY29uc29sZS5sb2coaWQpOwogICAgICB2YXIgYWRkQ2FydExpc3QgPSBbewogICAgICAgIGlkOiBpZCwKICAgICAgICBudW06IDEsCiAgICAgICAgaXNjaGVja2VkOiBmYWxzZQogICAgICB9XTsKICAgICAgdmFyIGNhcnRMaXN0ID0gd2luZG93LmxvY2FsU3RvcmFnZS5nZXRJdGVtKCdjYXJ0TGlzdCcpOwoKICAgICAgaWYgKGNhcnRMaXN0ID09PSBudWxsKSB7CiAgICAgICAgd2luZG93LmxvY2FsU3RvcmFnZS5zZXRJdGVtKCdjYXJ0TGlzdCcsIEpTT04uc3RyaW5naWZ5KGFkZENhcnRMaXN0KSk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgY2FydExpc3QgPSBKU09OLnBhcnNlKGNhcnRMaXN0KTsKICAgICAgICB2YXIgaW5kZXggPSBjYXJ0TGlzdC5maW5kSW5kZXgoZnVuY3Rpb24gKGl0ZW0pIHsKICAgICAgICAgIHJldHVybiBpdGVtLmlkID09PSBhZGRDYXJ0TGlzdFswXS5pZDsKICAgICAgICB9KTsKCiAgICAgICAgaWYgKGluZGV4ICE9PSAtMSkgewogICAgICAgICAgY2FydExpc3RbaW5kZXhdLm51bSsrOwogICAgICAgICAgd2luZG93LmxvY2FsU3RvcmFnZS5zZXRJdGVtKCdjYXJ0TGlzdCcsIEpTT04uc3RyaW5naWZ5KGNhcnRMaXN0KSk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHdpbmRvdy5sb2NhbFN0b3JhZ2Uuc2V0SXRlbSgnY2FydExpc3QnLCBKU09OLnN0cmluZ2lmeShjYXJ0TGlzdC5jb25jYXQoYWRkQ2FydExpc3QpKSk7CiAgICAgICAgfQogICAgICB9CgogICAgICB0aGlzLmNhcnROdW1DaGFuZ2UoSlNPTi5wYXJzZSh3aW5kb3cubG9jYWxTdG9yYWdlLmdldEl0ZW0oJ2NhcnRMaXN0JykpLmxlbmd0aCk7CiAgICB9CiAgfSksCiAgY3JlYXRlZDogZnVuY3Rpb24gY3JlYXRlZCgpIHsKICAgIHZhciBfdGhpczIgPSB0aGlzOwoKICAgIC8vIOiwg+eUqOaOpeWPo+iOt+WPlui9ruaSreWbvuaVsOaNrgogICAgdGhpcy4kaHR0cC5nZXQoJy9tYWluX2FkX2ltYWdlcycpLnRoZW4oZnVuY3Rpb24gKHJlcykgewogICAgICBfdGhpczIuc2xpZGVzaG93TGlzdCA9IHJlcy5kYXRhLmRhdGE7CiAgICB9KTsgLy8g6LCD55So5o6l5Y+j6I635Y+W6aaW6aG15ZWG5ZOB5o6o6I2Q5YiG57G7CgogICAgdGhpcy4kaHR0cC5nZXQoJy9pbmRleF9jYXRlZ29yaWVzJykudGhlbihmdW5jdGlvbiAocmVzKSB7CiAgICAgIF90aGlzMi5nb29kc0NsYXNzZXMgPSByZXMuZGF0YS5kYXRhOwogICAgfSk7CiAgfQp9Ow=="},{"version":3,"sources":["Home.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA+BA,SAAA,YAAA,QAAA,MAAA;AACA,eAAA;AACA,EAAA,IADA,kBACA;AACA,WAAA;AACA,MAAA,aAAA,EAAA,EADA;AAEA,MAAA,YAAA,EAAA,EAFA;AAGA,MAAA,UAAA,EAAA,EAHA;AAIA,MAAA,OAAA,EAAA,KAJA;AAKA,MAAA,QAAA,EAAA,KALA;AAMA,MAAA,IAAA,EAAA,CANA;AAOA,MAAA,QAAA,EAAA;AAPA,KAAA;AASA,GAXA;AAYA,EAAA,OAAA,oBACA,YAAA,CAAA,CAAA,eAAA,CAAA,CADA;AAEA,IAAA,MAFA,oBAEA;AAAA;;AACA;AACA,WAAA,KAAA,CACA,GADA,6BACA,KAAA,IADA,uBACA,KAAA,QADA,GAEA,IAFA,CAEA,UAAA,GAAA,EAAA;AACA,QAAA,KAAA,CAAA,UAAA,GAAA,KAAA,CAAA,UAAA,CAAA,MAAA,CAAA,GAAA,CAAA,IAAA,CAAA,IAAA,CAAA,CADA,CAEA;;AACA,QAAA,KAAA,CAAA,OAAA,GAAA,KAAA;AACA,QAAA,KAAA,CAAA,IAAA,GAJA,CAKA;;AACA,YAAA,GAAA,CAAA,IAAA,CAAA,IAAA,CAAA,MAAA,KAAA,CAAA,EAAA;AACA,UAAA,KAAA,CAAA,QAAA,GAAA,IAAA;AACA;AACA,OAXA;AAYA,KAhBA;AAiBA,IAAA,OAjBA,mBAiBA,EAjBA,EAiBA;AACA,MAAA,OAAA,CAAA,GAAA,CAAA,EAAA;AACA,UAAA,WAAA,GAAA,CAAA;AAAA,QAAA,EAAA,EAAA,EAAA;AAAA,QAAA,GAAA,EAAA,CAAA;AAAA,QAAA,SAAA,EAAA;AAAA,OAAA,CAAA;AACA,UAAA,QAAA,GAAA,MAAA,CAAA,YAAA,CAAA,OAAA,CAAA,UAAA,CAAA;;AACA,UAAA,QAAA,KAAA,IAAA,EAAA;AACA,QAAA,MAAA,CAAA,YAAA,CAAA,OAAA,CAAA,UAAA,EAAA,IAAA,CAAA,SAAA,CAAA,WAAA,CAAA;AACA,OAFA,MAEA;AACA,QAAA,QAAA,GAAA,IAAA,CAAA,KAAA,CAAA,QAAA,CAAA;AACA,YAAA,KAAA,GAAA,QAAA,CAAA,SAAA,CAAA,UAAA,IAAA,EAAA;AACA,iBAAA,IAAA,CAAA,EAAA,KAAA,WAAA,CAAA,CAAA,CAAA,CAAA,EAAA;AACA,SAFA,CAAA;;AAGA,YAAA,KAAA,KAAA,CAAA,CAAA,EAAA;AACA,UAAA,QAAA,CAAA,KAAA,CAAA,CAAA,GAAA;AACA,UAAA,MAAA,CAAA,YAAA,CAAA,OAAA,CAAA,UAAA,EAAA,IAAA,CAAA,SAAA,CAAA,QAAA,CAAA;AACA,SAHA,MAGA;AACA,UAAA,MAAA,CAAA,YAAA,CAAA,OAAA,CAAA,UAAA,EAAA,IAAA,CAAA,SAAA,CAAA,QAAA,CAAA,MAAA,CAAA,WAAA,CAAA,CAAA;AACA;AACA;;AACA,WAAA,aAAA,CAAA,IAAA,CAAA,KAAA,CAAA,MAAA,CAAA,YAAA,CAAA,OAAA,CAAA,UAAA,CAAA,EAAA,MAAA;AACA;AApCA,IAZA;AAkDA,EAAA,OAlDA,qBAkDA;AAAA;;AACA;AACA,SAAA,KAAA,CAAA,GAAA,CAAA,iBAAA,EAAA,IAAA,CAAA,UAAA,GAAA,EAAA;AACA,MAAA,MAAA,CAAA,aAAA,GAAA,GAAA,CAAA,IAAA,CAAA,IAAA;AACA,KAFA,EAFA,CAKA;;AACA,SAAA,KAAA,CAAA,GAAA,CAAA,mBAAA,EAAA,IAAA,CAAA,UAAA,GAAA,EAAA;AACA,MAAA,MAAA,CAAA,YAAA,GAAA,GAAA,CAAA,IAAA,CAAA,IAAA;AACA,KAFA;AAGA;AA3DA,CAAA","sourcesContent":["<template>\r\n  <div class=\"home\">\r\n    <!-- 图片轮播图 -->\r\n    <van-row>\r\n      <van-swipe :autoplay=\"3000\" indicator-color=\"white\">\r\n        <van-swipe-item v-for=\"item in slideshowList\" :key=\"item.id\">\r\n          <van-image height=\"10rem\" fit=\"contain\" :src=\"item.image\" :to=\"item.link\" />\r\n        </van-swipe-item>\r\n      </van-swipe>\r\n    </van-row>\r\n    <!-- 推荐分类 -->\r\n    <van-row>\r\n      <van-grid :column-num=\"4\">\r\n        <van-grid-item v-for=\"item in goodsClasses\" :key=\"item.id\" :text=\"item.cat_name\" />\r\n      </van-grid>\r\n    </van-row>\r\n    <van-list v-model=\"loading\" :finished=\"finished\" finished-text=\"没有更多了\" @load=\"onLoad\">\r\n      <!-- 商品列表 -->\r\n      <van-row class=\"goodsList\" gutter=\"20\">\r\n        <van-col v-for=\"item in goodsLists\" :key=\"item.id\" :span=\"10\" class=\"goods_item\">\r\n          <van-image width=\"100\" height=\"100\" :src=\"item.image\" />\r\n          <div class=\"van-ellipsis goods_text\">{{item.goods_name}}</div>\r\n          <van-button type=\"warning\" size=\"small\" @click=\"addCart(item.id)\">加入购物车</van-button>\r\n          <p class=\"goods_price\">&yen;{{item.price}}</p>\r\n        </van-col>\r\n      </van-row>\r\n    </van-list>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { mapMutations } from 'vuex'\r\nexport default {\r\n  data () {\r\n    return {\r\n      slideshowList: [],\r\n      goodsClasses: [],\r\n      goodsLists: [],\r\n      loading: false,\r\n      finished: false,\r\n      page: 1,\r\n      per_page: 20\r\n    }\r\n  },\r\n  methods: {\r\n    ...mapMutations(['cartNumChange']),\r\n    onLoad () {\r\n      // 调用接口获取首页商品列表\r\n      this.$http\r\n        .get(`/index_goods?page=${this.page}&per_page=${this.per_page}`)\r\n        .then(res => {\r\n          this.goodsLists = this.goodsLists.concat(res.data.data)\r\n          // 加载状态结束\r\n          this.loading = false\r\n          this.page++\r\n          // 数据全部加载完成\r\n          if (res.data.data.length === 0) {\r\n            this.finished = true\r\n          }\r\n        })\r\n    },\r\n    addCart (id) {\r\n      console.log(id)\r\n      let addCartList = [{ id: id, num: 1, ischecked: false }]\r\n      let cartList = window.localStorage.getItem('cartList')\r\n      if (cartList === null) {\r\n        window.localStorage.setItem('cartList', JSON.stringify(addCartList))\r\n      } else {\r\n        cartList = JSON.parse(cartList)\r\n        let index = cartList.findIndex(item => {\r\n          return item.id === addCartList[0].id\r\n        })\r\n        if (index !== -1) {\r\n          cartList[index].num++\r\n          window.localStorage.setItem('cartList', JSON.stringify(cartList))\r\n        } else {\r\n          window.localStorage.setItem('cartList', JSON.stringify(cartList.concat(addCartList)))\r\n        }\r\n      }\r\n      this.cartNumChange(JSON.parse(window.localStorage.getItem('cartList')).length)\r\n    }\r\n  },\r\n  created () {\r\n    // 调用接口获取轮播图数据\r\n    this.$http.get('/main_ad_images').then(res => {\r\n      this.slideshowList = res.data.data\r\n    })\r\n    // 调用接口获取首页商品推荐分类\r\n    this.$http.get('/index_categories').then(res => {\r\n      this.goodsClasses = res.data.data\r\n    })\r\n  }\r\n}\r\n</script>\r\n\r\n<style>\r\n.home {\r\n  padding-bottom: 80px;\r\n}\r\n.goodsList {\r\n  padding: 20px 60px;\r\n}\r\n.goods_item {\r\n  text-align: center;\r\n  margin-bottom: 20px;\r\n}\r\n\r\n.goods_item:nth-child(even) {\r\n  margin-left: 30px;\r\n}\r\n.goods_text {\r\n  margin: 10px 0;\r\n}\r\n.goods_price {\r\n  margin: 0;\r\n  padding: 5px 0;\r\n  color: red;\r\n}\r\n</style>\r\n"],"sourceRoot":"src/views"}]}